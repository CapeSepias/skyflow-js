<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8" />
    <style>
      iframe::selection {
        background-color: transparent;
      }
      .base {
        color: #3f51b5;
      }
      .base:hover {
        /* this wont work */
        color: aqua;
      }
      .complete {
        color: #4caf50;
      }
      .empty {
      }
      .invalid {
        color: #f44336;
      }

      #form {
        display: flex;
        flex-direction: column;
        flex-wrap: wrap;
        height: 100vh;
      }

      #form div {
        width: 300px !important;
        height: 200px !important;
      }
    </style>
    <script src="https://unpkg.com/axios/dist/axios.min.js"></script>
  </head>
  <body>
    <form action="#" id="form">
      <label>cvv</label>
      <div id="cvv"></div>
      <label>card number</label>
      <div id="cardNumber"></div>
      <label>expire date</label>
      <div id="expireDate"></div>
      <label>name</label>
      <div id="name"></div>
      <button id="submit" type="submit">Submit</button>
    </form>
    <script>
      const options = {
        styles: {
          base: {
            border: "1px solid #eae8ee",
            padding: "10px 16px",
            "border-radius": "4px",
            color: "#1d1d1d",
          },
          complete: {
            color: "#4caf50",
          },
          empty: {},
          focus: {},
          invalid: {
            color: "#f44336",
          },
        }
        // value: "",
        // disabled: false,
      };
      const newStyles = {
        styles: {
          ...options.styles,
          base: {
            border: "1px solid rgb(234, 232, 238)",
            padding: "10px 16px",
            "border-radius": "4px",
            ...options.styles.base,
          },
        },
      };
      const Label = {
        styles: {
          base: {
            margin: "0 0 8px",
            color: "rgb(105, 105, 105)",
            "font-size": "12px",
          },
        },
      };

      const skyflow = new Skyflow.init({
        vaultId: "e20afc3ae1b54f0199f24130e51e0c11",
        workspaceUrl: "sb.area51.vault.skyflowapis.dev",
        getAccessToken: () => {
          return axios
            .get("http://localhost:8000/js/userToken")
            .then((res) => res.data.accessToken);
        },
      });

      const container = skyflow.container("COLLECT")

      const cvvElement = container.create({
        table: "pii_fields",
        column: "primary_card.cvv",
        ...options,
        placeholder: "cvv",
        type: "cvv"
      })

      cvvElement.mount("#cvv")

      const cardNumber = container.create({
        table: "pii_fields",
        column: "primary_card.card_number",
        ...options,
        placeholder: "XXXX XXXX XXXX XXXX",
        type: "cardNumber"
      })

      cardNumber.mount("#cardNumber")

      const expireDate = container.create({
        table: "pii_fields",
        column: "expiryDate",
        ...options,
        placeholder: "MM/YYYY",
        type: "expireDate"
      })

      expireDate.mount("#expireDate")

      const name = container.create({
        table: "pii_fields",
        column: "first_name",
        ...options,
        type: "cardHolderName"
      })

      name.mount("#name")

      const insertBtn = document.getElementById('submit'); 

      if(insertBtn){
        insertBtn.addEventListener('click', () => {
        container.collect().then((res)=>{console.log(res)}).catch(e => console.log(e))
      })
      }
    </script>
  </body>
</html>

<!--
  need to check the skyflow object
  should we need to  mock the analyst review screen
-->
